<load target="js/contact_admin.js" />
<load target="js/module_admin.js" />
<block cond="$selected_var_idx && $extra_keys[$selected_var_idx]">
    {@ $selected_var = $extra_keys[$selected_var_idx] }
</block>
<div cond="$XE_VALIDATOR_MESSAGE" class="message {$XE_VALIDATOR_MESSAGE_TYPE}">
	<p>{$XE_VALIDATOR_MESSAGE}</p>
</div>
<form action="./" ruleset="insertExtraVar" method="post" cond="$type == 'insertExtraForm' || $selected_var_idx" class="x_form-horizontal">
	<input type="hidden" name="act" value="procContactAdminInsertExtraVar" />
	<input type="hidden" name="module_srl" value="{$module_srl}" />
	<input type="hidden" name="var_idx" value="{$selected_var_idx}" />
	<input type="hidden" name="success_return_url" value="{getUrl('', 'module', $module, 'act', $act, 'module_srl', $module_srl)}" />
	<div class="x_control-group">
		<label class="x_control-label" for="eid">{$lang->eid}</label>
		<div class="x_controls">
			<input type="text" name="eid" value="{$selected_var->eid}" id="eid" />
			<a href="#about_extra_vars_eid_value" class="x_icon-question-sign" data-toggle>{$lang->help}</a>
			<p id="about_extra_vars_eid_value" class="x_help-block" hidden>{$lang->about_extra_vars_eid_value}</p>
		</div>
	</div>
	<div class="x_control-group">
		<label class="x_control-label" for="lang_name">{$lang->component_name}</label>
		<div class="x_controls">
			<input type="text" name="name" class="lang_code" value="{$selected_var->name}" id="name" /> 
		</div>
	</div>
	<div class="x_control-group">
		<label class="x_control-label" for="type">{$lang->input_type}</label>
		<div class="x_controls">
			<select name="type" id="type">
				<option loop="$lang->input_type_list => $k,$v" value="{$k}" selected="selected"|cond="$selected_var->type==$k">{$lang->input_type_list[$k]}</option>
			</select>
		</div>
	</div>
	<div class="x_control-group">
		<label class="x_control-label" for="is_required">{$lang->is_required}</label>
		<div class="x_controls">
			<label for="is_required" class="x_inline">
				<input type="checkbox" name="is_required" id="is_required" value="Y" checked="checked"|cond="$selected_var->is_required=='Y'" />
				{$lang->is_required}
			</label>
		</div>
	</div>
	<div class="x_control-group">
		<label class="x_control-label" for="default">{$lang->default_value}</label>
		<div class="x_controls">
			<input type="text" name="default" id="default" value="{$selected_var->default}" />
			<a href="#about_extra_vars_default_value" class="x_icon-question-sign" data-toggle>{$lang->help}</a>
			<p id="about_extra_vars_default_value" class="x_help-block" hidden>{$lang->about_extra_vars_default_value}</p>
		</div>
	</div>
	<div class="x_control-group">
		<label class="x_control-label" for="lang_desc">{$lang->description}</label>
		<div class="x_controls">
			<input type="text" name="desc" value="{$selected_var->desc}" id="desc" class="lang_code" />
		</div>
	</div>
	<div class="btnArea">
		<a href="{getUrl('type','','selected_var_idx','')}" class="x_btn x_pull-left">{$lang->cmd_back}</a>
		<span>
			<input cond="$selected_var" class="x_btn x_btn-primary" type="submit" value="{$lang->cmd_modify}" />
			<input cond="!$selected_var" class="x_btn x_btn-primary" type="submit" value="{$lang->cmd_insert}" />
		</span>
	</div>
</form>
<table cond="!($type == 'insertExtraForm' || $selected_var_idx)" class="x_table x_table-striped x_table-hover ">
	<thead>
		<tr>
			<th>{$lang->no}</th>
			<th>{$lang->eid}</th>
			<th>{$lang->input_type}</th>
			<th>{$lang->default_value}</th>
			<th>{$lang->description}</th>
			<th>{$lang->is_required}</th>
			<th>{$lang->cmd_edit}</th>
		</tr>
	</thead>
	<tbody>
		<tr loop="$extra_keys =>$key, $val">
			<td>{$val->idx}</td>
			<td>{$val->name}</td>
			<td>{$lang->column_type_list[$val->type]}</td>
			<td>{$val->default}</td>
			<td>{$val->desc}</td>
			<td><!--@if($val->is_required=='Y')--><strong>Y</strong><!--@else-->N<!--@end--></td>
			<td>
				<button type="button" cond="$val->idx>1" onclick="moveVar('up','{$module_srl}','{$val->idx}')" class="x_icon-arrow-up">{$lang->cmd_up}</button>
				<button type="button" onclick="moveVar('down','{$module_srl}','{$val->idx}')" class="x_icon-arrow-down">{$lang->cmd_down}</button>
				<a href="{getUrl('selected_var_idx',$val->idx)}" class="x_icon-wrench">{$lang->cmd_modify}</a>
				<button type="button" onclick="return doDeleteExtraKey('{$module_srl}','{$val->idx}');" class="x_icon-remove">{$lang->cmd_delete}</button>
			</td>
		</tr>
	</tbody>
</table>
<div cond="!($type == 'insertExtraForm' || $selected_var_idx)" class="x_clearfix">
	<a href="{getUrl('type','insertExtraForm','selected_var_idx','')}" class="x_btn x_btn-inverse x_pull-right">{$lang->cmd_insert}</a>
</div>
<form id="fo_delete" name="fo_delete" method="post" action="./">
	<input type="hidden" name="module_srl" value="" />
	<input type="hidden" name="var_idx" value="" />
</form>
